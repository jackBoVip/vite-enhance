# ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿå®ç°æ€»ç»“

## ğŸ¯ å®ç°ç›®æ ‡

æˆåŠŸå®ç°äº†åŸºäº Changesets çš„ç»Ÿä¸€ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿï¼Œæ»¡è¶³äº†é¡¹ç›®çš„ç‰ˆæœ¬ç»Ÿä¸€ç®¡ç†éœ€æ±‚ã€‚

## âœ… å·²å®ŒæˆåŠŸèƒ½

### 1. æ ¸å¿ƒç‰ˆæœ¬ç®¡ç†å·¥å…·
- **Changesets é›†æˆ**: ä½¿ç”¨ Changesets ä½œä¸ºæ ¸å¿ƒç‰ˆæœ¬ç®¡ç†å·¥å…·
- **å›ºå®šç‰ˆæœ¬ç­–ç•¥**: é…ç½®äº† fixed versioningï¼Œç¡®ä¿æ‰€æœ‰åŒ…ç‰ˆæœ¬ä¿æŒä¸€è‡´
- **è‡ªåŠ¨ CHANGELOG ç”Ÿæˆ**: è‡ªåŠ¨ç”Ÿæˆè¯¦ç»†çš„å˜æ›´æ—¥å¿—

### 2. ç‰ˆæœ¬ä¸€è‡´æ€§æ£€æŸ¥
- **ç‰ˆæœ¬æ£€æŸ¥è„šæœ¬** (`scripts/check-versions.js`):
  - æ£€æŸ¥æ‰€æœ‰åŒ…ç‰ˆæœ¬ä¸€è‡´æ€§
  - éªŒè¯ä¾èµ–ç‰ˆæœ¬ä¸€è‡´æ€§
  - æ£€æŸ¥ workspace:* å¼•ç”¨æ­£ç¡®æ€§
  - ç”Ÿæˆè¯¦ç»†çš„ä¸€è‡´æ€§æŠ¥å‘Š

### 3. ä¾èµ–åŒæ­¥å·¥å…·
- **ä¾èµ–åŒæ­¥è„šæœ¬** (`scripts/sync-dependencies.js`):
  - è‡ªåŠ¨åŒæ­¥ç›¸åŒä¾èµ–çš„ç‰ˆæœ¬
  - æ™ºèƒ½é€‰æ‹©æœ€å¸¸ç”¨çš„ç‰ˆæœ¬ä½œä¸ºæ ‡å‡†
  - è‡ªåŠ¨å¤„ç† workspace:* å¼•ç”¨
  - æ”¯æŒæ‰¹é‡æ›´æ–°

### 4. å·¥ä½œç©ºé—´åˆ†æ
- **å·¥ä½œç©ºé—´åˆ†æå·¥å…·** (`scripts/analyze-workspace.js`):
  - è§£æ pnpm-workspace.yaml é…ç½®
  - æ„å»ºåŒ…ä¾èµ–å…³ç³»å›¾
  - æ£€æµ‹å¾ªç¯ä¾èµ–
  - ç”Ÿæˆä¾èµ–å…³ç³»å¯è§†åŒ–æŠ¥å‘Š

### 5. ç»Ÿä¸€ CLI æ¥å£
- **ç‰ˆæœ¬ç®¡ç† CLI** (`bin/version-manager.js`):
  - ç»Ÿä¸€çš„å‘½ä»¤è¡Œæ¥å£
  - æ”¯æŒæ‰€æœ‰ç‰ˆæœ¬ç®¡ç†æ“ä½œ
  - æ”¯æŒ --dry-run æ¨¡å¼
  - å‹å¥½çš„å¸®åŠ©ä¿¡æ¯

## ğŸ“‹ å¯ç”¨å‘½ä»¤

### é€šè¿‡ pnpm scripts:
```bash
pnpm version:check      # æ£€æŸ¥ç‰ˆæœ¬ä¸€è‡´æ€§
pnpm version:sync       # åŒæ­¥ä¾èµ–ç‰ˆæœ¬
pnpm version:analyze    # åˆ†æå·¥ä½œç©ºé—´
pnpm version:update     # åº”ç”¨ changesets æ›´æ–°ç‰ˆæœ¬
pnpm version:release    # æ„å»ºå¹¶å‘å¸ƒåŒ…
```

### é€šè¿‡ç»Ÿä¸€ CLI:
```bash
node bin/version-manager.js check      # æ£€æŸ¥ç‰ˆæœ¬ä¸€è‡´æ€§
node bin/version-manager.js sync       # åŒæ­¥ä¾èµ–ç‰ˆæœ¬
node bin/version-manager.js analyze    # åˆ†æå·¥ä½œç©ºé—´
node bin/version-manager.js status     # æŸ¥çœ‹ changeset çŠ¶æ€
node bin/version-manager.js version    # æ›´æ–°ç‰ˆæœ¬
node bin/version-manager.js release    # å‘å¸ƒåŒ…
```

## ğŸ”§ é…ç½®æ–‡ä»¶

### Changesets é…ç½® (`.changeset/config.json`)
```json
{
  "changelog": "@changesets/cli/changelog",
  "commit": false,
  "fixed": [
    ["@vite-enhance", "@vite-enhance/shared", "@vite-enhance/config"]
  ],
  "access": "public",
  "baseBranch": "main",
  "updateInternalDependencies": "patch"
}
```

### å·¥ä½œç©ºé—´é…ç½® (`pnpm-workspace.yaml`)
```yaml
packages:
  - 'packages/*'
  - 'packages/plugins/*'
  - 'examples/*'
```

## ğŸ“Š å½“å‰çŠ¶æ€

### åŒ…ç‰ˆæœ¬çŠ¶æ€
- æ‰€æœ‰æ ¸å¿ƒåŒ…ç‰ˆæœ¬: `0.1.1`
- ç‰ˆæœ¬ä¸€è‡´æ€§: âœ… é€šè¿‡
- ä¾èµ–ä¸€è‡´æ€§: âœ… é€šè¿‡
- Workspace å¼•ç”¨: âœ… æ­£ç¡®

### åŒ…ç»“æ„
```
packages/
â”œâ”€â”€ vite-enhance/          # ä¸»å…¥å£åŒ…
â”œâ”€â”€ shared/               # å…±äº«å·¥å…·å’Œç±»å‹
â”œâ”€â”€ config/               # é…ç½® API
â””â”€â”€ plugins/              # æ’ä»¶åŒ… (å¤šä¸ª)
```

## ğŸš€ ç‰ˆæœ¬ç®¡ç†å·¥ä½œæµ

### 1. æ—¥å¸¸å¼€å‘
```bash
# æ£€æŸ¥å½“å‰çŠ¶æ€
pnpm version:check

# åŒæ­¥ä¾èµ–ç‰ˆæœ¬
pnpm version:sync
```

### 2. å‘å¸ƒæ–°ç‰ˆæœ¬
```bash
# 1. åˆ›å»º changeset
pnpm changeset

# 2. æŸ¥çœ‹å¾…å‘å¸ƒçš„æ›´æ”¹
pnpm changeset status

# 3. æ›´æ–°ç‰ˆæœ¬å·
pnpm version:update

# 4. æäº¤æ›´æ”¹
git add . && git commit -m "Version bump"

# 5. å‘å¸ƒåŒ…
pnpm version:release
```

### 3. é—®é¢˜è¯Šæ–­
```bash
# åˆ†æå·¥ä½œç©ºé—´ç»“æ„
pnpm version:analyze

# æ£€æŸ¥ç‰ˆæœ¬ä¸€è‡´æ€§
pnpm version:check

# å¹²è¿è¡Œæ¨¡å¼æŸ¥çœ‹ä¼šåšä»€ä¹ˆæ›´æ”¹
node bin/version-manager.js sync --dry-run
```

## ğŸ‰ æˆæœå±•ç¤º

1. **ç‰ˆæœ¬ç»Ÿä¸€**: æ‰€æœ‰åŒ…ç‰ˆæœ¬ä¿æŒä¸€è‡´ (0.1.1)
2. **ä¾èµ–åŒæ­¥**: æ‰€æœ‰å¤–éƒ¨ä¾èµ–ç‰ˆæœ¬å·²ç»Ÿä¸€
3. **å·¥å…·å®Œæ•´**: æä¾›äº†å®Œæ•´çš„ç‰ˆæœ¬ç®¡ç†å·¥å…·é“¾
4. **è‡ªåŠ¨åŒ–**: æ”¯æŒè‡ªåŠ¨åŒ–çš„ç‰ˆæœ¬æ›´æ–°å’Œå‘å¸ƒæµç¨‹
5. **å¯è§†åŒ–**: æä¾›äº†ä¾èµ–å…³ç³»åˆ†æå’Œå¯è§†åŒ–

## ğŸ“ˆ æŠ€æœ¯ç‰¹ç‚¹

- **åŸºäºæˆç†Ÿå·¥å…·**: ä½¿ç”¨ Changesets ä½œä¸ºæ ¸å¿ƒï¼Œç¨³å®šå¯é 
- **æ™ºèƒ½åŒæ­¥**: è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜ç‰ˆæœ¬è¿›è¡ŒåŒæ­¥
- **å…¨é¢æ£€æŸ¥**: å¤šç»´åº¦çš„ç‰ˆæœ¬ä¸€è‡´æ€§éªŒè¯
- **å‹å¥½ç•Œé¢**: å½©è‰²è¾“å‡ºå’Œæ¸…æ™°çš„æŠ¥å‘Šæ ¼å¼
- **çµæ´»é…ç½®**: æ”¯æŒä¸åŒçš„ç‰ˆæœ¬ç®¡ç†ç­–ç•¥

ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿå·²æˆåŠŸå®ç°å¹¶æŠ•å…¥ä½¿ç”¨ï¼ğŸŠ