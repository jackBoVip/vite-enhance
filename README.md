# Vite Enhance Kit

[English](./README.en.md) | ç®€ä½“ä¸­æ–‡

> ğŸš€ **ä¸€ä¸ªä½äº Vite ä¹‹ä¸Šçš„å·¥ç¨‹åŒ–å¢å¼ºå±‚ï¼Œç”¨æœ€å°‘çš„é…ç½®äº¤ä»˜å¤§å‚çº§å‰ç«¯å·¥ç¨‹ä½“éªŒ**

---

## âœ¨ å®ƒæ˜¯ä»€ä¹ˆï¼Ÿ

**Vite Enhance Kit** æ˜¯ä¸€ä¸ªåŸºäº Vite çš„å·¥ç¨‹åŒ–å¢å¼ºå·¥å…·åŒ…ï¼Œæä¾›ï¼š

* æ™ºèƒ½é¡¹ç›®ç±»å‹ä¸æ¡†æ¶è¯†åˆ«ï¼ˆVue / React / Svelte / Solid / Lit / Preactï¼‰
* åº”ç”¨æ„å»ºï¼ˆAppï¼‰ä¸åº“æ„å»ºï¼ˆLibï¼‰çš„ç»Ÿä¸€æŠ½è±¡
* å®˜æ–¹ç»´æŠ¤çš„å·¥ç¨‹åŒ–æ’ä»¶ç”Ÿæ€
* ä¼ä¸šçº§èƒ½åŠ›ï¼ˆCDNã€ç¼“å­˜ã€PWAã€æ„å»ºåˆ†æç­‰ï¼‰

å®ƒ **ä¸æ›¿ä»£ Vite**ï¼Œè€Œæ˜¯ä½œä¸ºä¸€å±‚ *Enhance Layer*ï¼Œè®© Vite åœ¨çœŸå®é¡¹ç›®ä¸­æ›´å¥½ç”¨ã€æ›´ç»Ÿä¸€ã€æ›´å¯æ²»ç†ã€‚

---

## ğŸ¤” ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ

åœ¨çœŸå®çš„ä¸­å¤§å‹é¡¹ç›®ä¸­ï¼Œå‰ç«¯å·¥ç¨‹å¾€å¾€é¢ä¸´ä»¥ä¸‹é—®é¢˜ï¼š

* é¡¹ç›®å½¢æ€å¤šæ ·ï¼šWebï¼ˆVue / React / Svelte / Solid / Lit / Preactï¼‰ã€ç»„ä»¶åº“ã€Electronã€React Native
* ä»“åº“å½¢æ€å¤æ‚ï¼šMonorepo + å¤šåº”ç”¨ + å¤šåŒ…
* æ„å»ºè¯‰æ±‚ä¸ä¸€è‡´ï¼šå¼€å‘è¦å¿«ã€CI è¦ç¨³ã€äº§ç‰©è¦å°
* å·¥ç¨‹èƒ½åŠ›åˆ†æ•£ï¼šCDNã€ç¼“å­˜ã€PWAã€Mockã€è§„èŒƒå„è‡ªä¸ºæˆ˜

**Vite Enhance Kit å…³æ³¨çš„ä¸æ˜¯â€œæ€ä¹ˆæ‰“åŒ…â€ï¼Œè€Œæ˜¯â€œæ€ä¹ˆæŠŠå·¥ç¨‹è¿™ä»¶äº‹é•¿æœŸåšå¥½â€ã€‚**

å®ƒå°è¯•æŠŠï¼š

> å¤§å‚é‡Œè¢«åå¤éªŒè¯çš„å·¥ç¨‹ç»éªŒï¼Œå˜æˆæ™®é€šé¡¹ç›®ä¹Ÿèƒ½ç”¨çš„å·¥å…·èƒ½åŠ›

---

### ä½¿ç”¨åŸç”Ÿ Vite æ—¶ï¼Œä½ å¯èƒ½é‡åˆ°è¿‡è¿™äº›é—®é¢˜ï¼š

* æ¯ä¸ªé¡¹ç›®éƒ½è¦é‡æ–°é€‰æ’ä»¶ã€æŠ„é…ç½®
* Vue / React / Lib é¡¹ç›®é…ç½®é£æ ¼ä¸ä¸€è‡´
* CDNã€å‹ç¼©ã€PWAã€Mock ç­‰èƒ½åŠ›é›¶æ•£
* å·¥ç¨‹æœ€ä½³å®è·µæ— æ³•æ²‰æ·€

**Vite Enhance Kit è§£å†³çš„æ˜¯â€œå·¥ç¨‹åŒ–é—®é¢˜â€ï¼Œè€Œä¸æ˜¯â€œæ„å»ºé—®é¢˜â€ã€‚**

---

## ğŸ¯ æ ¸å¿ƒå®šä½

| ç»´åº¦ | è¯´æ˜                   |
| -- | -------------------- |
| å®šä½ | Vite å·¥ç¨‹åŒ–å¢å¼ºå±‚          |
| é€‚ç”¨ | Vue / React / Svelte / Solid / Lit / Preact åº”ç”¨ & ç»„ä»¶åº“ |
| é£æ ¼ | çº¦å®šä¼˜äºé…ç½®ã€æ¸è¿›å¢å¼º          |
| ç”¨æˆ· | ä¸­å¤§å‹é¡¹ç›®ã€æŠ€æœ¯è´Ÿè´£äººã€åº“ä½œè€…      |
| ç‰¹æ€§ | ç±»å‹å®‰å…¨ã€æ’ä»¶åŒ–ã€å¯æ‰©å±•      |

å¯¹æ¯”åŒç±»æ–¹æ¡ˆï¼š

| æ–¹æ¡ˆ                   | åšä»€ä¹ˆ      | ä¸åšä»€ä¹ˆ     |
| -------------------- | -------- | -------- |
| Vite                 | æ„å»ºå·¥å…·     | å·¥ç¨‹æ²»ç†     |
| Nuxt / Next          | åº”ç”¨æ¡†æ¶     | æ¸è¿›å¼•å…¥     |
| Rsbuild              | æ„å»ºå°è£…     | æ’ä»¶ç”Ÿæ€     |
| **Vite Enhance Kit** | **å·¥ç¨‹å¢å¼º** | **æ¡†æ¶æ¥ç®¡** |

---

## âš¡ å¿«é€Ÿå¼€å§‹

### 1ï¸âƒ£ å®‰è£…

```bash
# ä½¿ç”¨ pnpm (æ¨è)
pnpm add -D vite-enhance

# ä½¿ç”¨ npm
npm install -D vite-enhance

# ä½¿ç”¨ yarn  
yarn add -D vite-enhance
```

> **æ³¨æ„**ï¼š`vite-enhance` åº”ä½œä¸ºå¼€å‘ä¾èµ–å®‰è£…ï¼Œå› ä¸ºå®ƒæ˜¯æ„å»ºå·¥å…·ã€‚

### 2ï¸âƒ£ é…ç½®é¡¹ç›®

```ts
// vite.config.ts
import { defineEnhanceConfig } from 'vite-enhance'

export default defineEnhanceConfig({
  enhance: {
    // ========== è‡ªåŠ¨æ£€æµ‹ï¼ˆæ¨èï¼‰ ==========
    // preset ä¼šè‡ªåŠ¨æ£€æµ‹é¡¹ç›®ç±»å‹ï¼ˆapp/libï¼‰ï¼Œæ— éœ€é…ç½®
    // æ¡†æ¶ä¼šæ ¹æ® package.json ä¾èµ–è‡ªåŠ¨æ£€æµ‹ï¼ˆVue/React/Svelte ç­‰ï¼‰
    
    // ========== CDN ä¼˜åŒ– ==========
    cdn: {
      autoDetect: true,              // è‡ªåŠ¨æ£€æµ‹ä¾èµ–å¹¶å¤–éƒ¨åŒ–
      autoDetectDeps: 'dependencies', // æ£€æµ‹èŒƒå›´ï¼šdependencies | all | production
      cdnProvider: 'jsdelivr',        // CDN æä¾›å•†ï¼šjsdelivr | unpkg | cdnjs
    },
    
    // ========== æ„å»ºä¼˜åŒ– ==========
    compress: {
      format: 'tar.gz',  // å‹ç¼©æ ¼å¼ï¼štar | tar.gz | zip
      enabled: true,
    },
    
    // ========== å¼€å‘ä½“éªŒ ==========
    analyze: {
      enabled: true,     // æ„å»ºåˆ†æ
      open: false,       // æ„å»ºåè‡ªåŠ¨æ‰“å¼€
      template: 'treemap', // å¯è§†åŒ–æ¨¡æ¿
    },
  },
  
  // åŸç”Ÿ Vite é…ç½®ï¼ˆå¯é€‰ï¼‰
  vite: {
    // ä½ çš„ Vite é…ç½®...
  }
})
```

### æœ€å°åŒ–é…ç½®

å¦‚æœä½ åªéœ€è¦åŸºç¡€åŠŸèƒ½ï¼Œå¯ä»¥ä½¿ç”¨æœ€ç®€é…ç½®ï¼š

```ts
import { defineEnhanceConfig } from 'vite-enhance'

export default defineEnhanceConfig({
  enhance: {
    // æ‰€æœ‰åŠŸèƒ½éƒ½ä¼šè‡ªåŠ¨æ£€æµ‹å’Œé…ç½®
    // æ— éœ€ä»»ä½•é…ç½®å³å¯ä½¿ç”¨ï¼
  }
})
```

### 3ï¸âƒ£ å¼€å§‹ä½¿ç”¨

```bash
# å¼€å‘æ¨¡å¼ï¼ˆè‡ªåŠ¨æ£€æµ‹æ¡†æ¶ï¼‰
npm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬ï¼ˆè‡ªåŠ¨ CDN å¤–éƒ¨åŒ–ã€å‹ç¼©ç­‰ï¼‰
npm run build

# é¢„è§ˆæ„å»ºç»“æœ
npm run preview
```

### æ„å»ºäº§ç‰©

```bash
dist/
â”œâ”€â”€ your-package-name/    # æŒ‰åŒ…åç»„ç»‡
â”‚   â”œâ”€â”€ index.html
â”‚   â””â”€â”€ assets/
â”‚       â”œâ”€â”€ index-[hash].js
â”‚       â””â”€â”€ index-[hash].css
â””â”€â”€ lib/
    â””â”€â”€ your-package-name.tar.gz  # å‹ç¼©åŒ…
```

---

## ğŸ§  æ ¸å¿ƒèƒ½åŠ›ä¸€è§ˆ

### ğŸ¯ æ™ºèƒ½æ£€æµ‹ï¼ˆé›¶é…ç½®ï¼‰

**é¡¹ç›®ç±»å‹è‡ªåŠ¨æ£€æµ‹**
* âœ… æ£€æµ‹ `index.html` â†’ App æ¨¡å¼
* âœ… æ£€æµ‹ `package.json` çš„ `main`/`module` å­—æ®µ â†’ Lib æ¨¡å¼
* âœ… è‡ªåŠ¨é…ç½®æ„å»ºè¾“å‡ºè·¯å¾„ï¼ˆ`dist/åŒ…å/`ï¼‰

**æ¡†æ¶è‡ªåŠ¨æ£€æµ‹**
* âœ… Vue / React / Svelte / Solid / Lit / Preact
* âœ… ä» `package.json` ä¾èµ–è‡ªåŠ¨è¯†åˆ«
* âœ… è‡ªåŠ¨åŠ è½½å¯¹åº”æ¡†æ¶æ’ä»¶
* âœ… Vue é¡¹ç›®è‡ªåŠ¨ä½¿ç”¨ runtime ç‰ˆæœ¬ï¼ˆä½“ç§¯æ›´å°ï¼‰

**ä¾èµ–è‡ªåŠ¨æ£€æµ‹**
* âœ… CDN è‡ªåŠ¨å¤–éƒ¨åŒ–å¸¸ç”¨åº“
* âœ… è‡ªåŠ¨æ·»åŠ  CSS èµ„æºï¼ˆElement Plusã€Antd ç­‰ï¼‰
* âœ… è‡ªåŠ¨é…ç½® crossorigin å±æ€§

### ğŸ“¦ åŒ…æ¶æ„è®¾è®¡

* `vite-enhance` - ä¸»å…¥å£åŒ…ï¼ˆå•åŒ…è®¾è®¡ï¼‰
* å†…ç½®æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½æ’ä»¶
* é›¶é¢å¤–ä¾èµ–ï¼ˆé€šè¿‡ optionalDependenciesï¼‰

### ğŸ§© å¤šé¡¹ç›® / å¤šå½¢æ€æ”¯æŒ

* âœ… Web åº”ç”¨ï¼ˆVue / React / Svelte / Solid / Lit / Preactï¼‰
* âœ… ç»„ä»¶åº“ / SDKï¼ˆLib æ¨¡å¼ï¼‰
* ğŸš§ Electronï¼ˆè§„åˆ’ä¸­ï¼‰
* ğŸš§ React Nativeï¼ˆè§„åˆ’ä¸­ï¼‰

---

### âš™ï¸ ç»Ÿä¸€æ„å»ºä¸å·¥ç¨‹æ¨¡å‹

* åº”ç”¨æ„å»ºï¼ˆApp Presetï¼‰
* åº“æ„å»ºï¼ˆLib Presetï¼‰
* Web / æ¡Œé¢ / ç§»åŠ¨å·¥ç¨‹æ¨¡å‹ç»Ÿä¸€

---

### âš¡ æ€§èƒ½ä¸æ„å»ºä½“éªŒ

* æ„å»ºç¼“å­˜ï¼ˆæœ¬åœ° / é¢„ç•™è¿œç¨‹ï¼‰
* å¢é‡æ„å»º
* æ„å»ºåˆ†æä¸è€—æ—¶ç»Ÿè®¡

---

### ğŸ§© å®˜æ–¹æ’ä»¶ç”Ÿæ€

* æ¡†æ¶æ’ä»¶ï¼ˆVue / React / Svelte / Solid / Lit / Preactï¼‰
* CDN æ’ä»¶ï¼ˆæ”¯æŒå…¬ç½‘ & å†…ç½‘ IPï¼ŒåŒ…å«è‡ªåŠ¨æ£€æµ‹åŠŸèƒ½ï¼‰
* æ„å»ºç¼“å­˜æ’ä»¶ï¼ˆé«˜æ€§èƒ½ç¼“å­˜ä¸æ™ºèƒ½å¤±æ•ˆæœºåˆ¶ï¼‰
* æ„å»ºåˆ†ææ’ä»¶ï¼ˆåŒ…å«æ„å»ºæ—¶é•¿ç»Ÿè®¡åŠŸèƒ½ï¼‰
* PWA æ’ä»¶

---

### âœ… æ ¸å¿ƒåŠŸèƒ½

**1. æ™ºèƒ½æ£€æµ‹**
* é¡¹ç›®ç±»å‹ï¼šApp / Lib è‡ªåŠ¨è¯†åˆ«
* æ¡†æ¶ç±»å‹ï¼šVue / React / Svelte / Solid / Lit / Preact
* ä¾èµ–å¤–éƒ¨åŒ–ï¼šå¸¸ç”¨åº“è‡ªåŠ¨ CDN åŒ–

**2. æ„å»ºä¼˜åŒ–**
* å‹ç¼©ï¼šæ”¯æŒ tar / tar.gz / zip æ ¼å¼
* åˆ†æï¼šå¯è§†åŒ–æ„å»ºäº§ç‰©å¤§å°
* è¾“å‡ºï¼šè‡ªåŠ¨æŒ‰åŒ…åç»„ç»‡ç›®å½•ç»“æ„

**3. CDN åŠŸèƒ½**
* è‡ªåŠ¨æ£€æµ‹ä¾èµ–å¹¶å¤–éƒ¨åŒ–
* æ”¯æŒå¤š CDN æä¾›å•†ï¼ˆjsdelivr / unpkg / cdnjsï¼‰
* è‡ªåŠ¨æ·»åŠ  CSS èµ„æº
* è‡ªåŠ¨é…ç½® CORSï¼ˆcrossorigin="anonymous"ï¼‰
* æ”¯æŒè‡ªå®šä¹‰ CDN åœ°å€

**4. æ¡†æ¶æ”¯æŒ**
* Vueï¼šè‡ªåŠ¨ä½¿ç”¨ runtime ç‰ˆæœ¬
* Reactï¼šè‡ªåŠ¨é…ç½® JSX
* Svelte / Solid / Lit / Preactï¼šå¼€ç®±å³ç”¨

---

## ğŸŒ CDN åŠŸèƒ½è¯¦è§£

### åŸºç¡€ç”¨æ³•ï¼ˆè‡ªåŠ¨æ£€æµ‹ï¼‰

```ts
enhance: {
  cdn: {
    autoDetect: true,              // è‡ªåŠ¨æ£€æµ‹ package.json ä¸­çš„ä¾èµ–
    autoDetectDeps: 'dependencies', // ä»…æ£€æµ‹ dependencies
  }
}
```

### é«˜çº§é…ç½®

```ts
enhance: {
  cdn: {
    // æ–¹å¼ 1: è‡ªåŠ¨æ£€æµ‹ + æ’é™¤/åŒ…å«
    autoDetect: true,
    autoDetectDeps: 'all',           // dependencies | all | production
    autoDetectExclude: ['lodash'],   // æ’é™¤æŸäº›ä¾èµ–
    autoDetectInclude: ['moment'],   // å¼ºåˆ¶åŒ…å«æŸäº›ä¾èµ–
    
    // æ–¹å¼ 2: æ‰‹åŠ¨æŒ‡å®šæ¨¡å—
    modules: ['vue', 'element-plus'], // æ‰‹åŠ¨æŒ‡å®šè¦å¤–éƒ¨åŒ–çš„æ¨¡å—
    
    // CDN æä¾›å•†
    cdnProvider: 'jsdelivr',  // jsdelivr | unpkg | cdnjs | custom
    customProdUrl: 'https://your-cdn.com/{name}@{version}/{path}',
    
    // å¼€å‘æ¨¡å¼
    enableInDevMode: false,   // é»˜è®¤ä»…ç”Ÿäº§ç¯å¢ƒå¯ç”¨
    
    // è‡ªå®šä¹‰æ ‡ç­¾ç”Ÿæˆï¼ˆé«˜çº§ï¼‰
    generateScriptTag: (name, url) => ({
      crossorigin: 'anonymous',
      integrity: 'sha384-...',
    }),
  }
}
```

### æ”¯æŒçš„æ¨¡å—

è‡ªåŠ¨æ£€æµ‹æ”¯æŒä»¥ä¸‹å¸¸ç”¨åº“ï¼ˆè‡ªåŠ¨æ·»åŠ  CSSï¼‰ï¼š

* **Vue ç”Ÿæ€**: `vue`, `vue-router`, `element-plus`
* **React ç”Ÿæ€**: `react`, `react-dom`, `antd`
* **å·¥å…·åº“**: `lodash`, `axios`, `moment`, `dayjs`
* **å…¶ä»–**: `jquery`, `bootstrap`, `echarts`, `three`

### æ•ˆæœå¯¹æ¯”

```bash
# æœªä½¿ç”¨ CDN
âœ“ dist/index.js   245 kB

# ä½¿ç”¨ CDN å
âœ“ dist/index.js   12 kB  âš¡ï¸ å‡å°‘ 95%
+ Vue ä» CDN åŠ è½½
+ Element Plus ä» CDN åŠ è½½ï¼ˆå« CSSï¼‰
```

### é€‚ç”¨åœºæ™¯

* âœ… å…¬ç½‘éƒ¨ç½²ï¼ˆåˆ©ç”¨ CDN åŠ é€Ÿï¼‰
* âœ… å¤šé¡µé¢åº”ç”¨ï¼ˆå…±äº«ç¼“å­˜ï¼‰
* âœ… å‡å°æ„å»ºäº§ç‰©ä½“ç§¯
* âœ… å†…ç½‘ç¯å¢ƒï¼ˆé…ç½®ç§æœ‰ CDNï¼‰

---

## ğŸ§© æ’ä»¶åˆ†çº§ä½“ç³»

* **Core**ï¼šæ ¸å¿ƒåŠŸèƒ½ï¼ˆé…ç½®æ²»ç†ã€ç±»å‹å®šä¹‰ï¼‰
* **Official**ï¼šå®˜æ–¹ç»´æŠ¤ï¼ˆVue / React / Svelte / Solid / Lit / Preact / CDN / Cache / Analyze / PWA ç­‰ï¼‰
* **Community**ï¼šç¤¾åŒºæ‰©å±•

> æ’ä»¶æœ‰ç”Ÿå‘½å‘¨æœŸã€æœ‰é¡ºåºã€å¯æ²»ç†ã€‚

### æ’ä»¶ç”Ÿå‘½å‘¨æœŸ

* `configResolved` - é…ç½®è§£æå®Œæˆ
* `buildStart` - æ„å»ºå¼€å§‹
* `buildEnd` - æ„å»ºç»“æŸ
* `configureServer` - æœåŠ¡å™¨é…ç½®
* `vitePlugin` - è¿”å› Vite æ’ä»¶

---

## ğŸ›£ï¸ é€‚åˆå“ªäº›åœºæ™¯ï¼Ÿ

### âœ… æ¨èåœºæ™¯

* **ä¼ä¸šçº§ä¸­åå°ç³»ç»Ÿ**ï¼šè‡ªåŠ¨åŒ–å·¥ç¨‹é…ç½®ï¼Œå‡å°‘é‡å¤åŠ³åŠ¨
* **å¤šé¡¹ç›®ç»Ÿä¸€è§„èŒƒ**ï¼šä¿æŒå·¥ç¨‹é…ç½®ä¸€è‡´æ€§
* **Monorepo æ¶æ„**ï¼šæ”¯æŒå¤šåŒ…åä½œï¼Œè‡ªåŠ¨å¤„ç†ä¾èµ–
* **ç»„ä»¶åº“ / SDK**ï¼šLib æ¨¡å¼å¼€ç®±å³ç”¨
* **æ€§èƒ½ä¼˜åŒ–é¡¹ç›®**ï¼šCDN å¤–éƒ¨åŒ–å‡å°äº§ç‰©ä½“ç§¯

### âš ï¸ ä¸é€‚åˆåœºæ™¯

* éœ€è¦æè‡´è‡ªå®šä¹‰æ„å»ºé…ç½®çš„é¡¹ç›®ï¼ˆç›´æ¥ç”¨ Viteï¼‰
* SSR / SSG æ¡†æ¶é¡¹ç›®ï¼ˆä½¿ç”¨ Nuxt / Nextï¼‰
* å¯¹æ„å»ºå·¥å…·æœ‰ç‰¹æ®Šè¦æ±‚çš„é¡¹ç›®

---

## ğŸš€ è¿›é˜¶é…ç½®

### å‹ç¼©åŠŸèƒ½

```ts
enhance: {
  compress: {
    format: 'tar.gz',      // tar | tar.gz | zip
    enabled: true,         // é»˜è®¤å¯ç”¨
    outputDir: 'dist/lib', // è¾“å‡ºç›®å½•
    fileName: 'custom',    // è‡ªå®šä¹‰æ–‡ä»¶åï¼ˆå¯é€‰ï¼‰
  }
}
```

**æ•ˆæœå¯¹æ¯”**ï¼š
* tar: 246 KBï¼ˆæœªå‹ç¼©ï¼‰
* tar.gz: 82 KBï¼ˆgzip å‹ç¼©ï¼‰
* zip: 82 KBï¼ˆzip å‹ç¼©ï¼‰

### æ„å»ºåˆ†æ

```ts
enhance: {
  analyze: {
    enabled: true,
    open: false,              // æ„å»ºåè‡ªåŠ¨æ‰“å¼€
    filename: 'stats.html',   // æŠ¥å‘Šæ–‡ä»¶å
    template: 'treemap',      // treemap | sunburst | network
    gzipSize: true,           // æ˜¾ç¤º gzip ä½“ç§¯
    brotliSize: true,         // æ˜¾ç¤º brotli ä½“ç§¯
  }
}
```

### ç¦ç”¨æŸäº›åŠŸèƒ½

```ts
enhance: {
  cdn: false,      // å®Œå…¨ç¦ç”¨ CDN
  compress: false, // ç¦ç”¨å‹ç¼©
  analyze: false,  // ç¦ç”¨åˆ†æ
}
```

### å¤šæ¡†æ¶é¡¹ç›®

```ts
// Vue é¡¹ç›®
enhance: {
  // è‡ªåŠ¨æ£€æµ‹ Vueï¼Œæ— éœ€é…ç½®
  cdn: {
    modules: ['vue', 'vue-router', 'element-plus']
  }
}

// React é¡¹ç›®
enhance: {
  // è‡ªåŠ¨æ£€æµ‹ Reactï¼Œæ— éœ€é…ç½®
  cdn: {
    modules: ['react', 'react-dom', 'antd']
  }
}
```

---

## ğŸ—ºï¸ Roadmapï¼ˆè§„åˆ’è·¯çº¿ï¼‰

### Phase 1 Â· æ ¸å¿ƒèƒ½åŠ›ï¼ˆâœ… å·²å®Œæˆï¼‰

* âœ… App / Lib åŒæ„å»ºæ¨¡å‹
* âœ… Vue / React / Svelte / Solid / Lit / Preact è‡ªåŠ¨è¯†åˆ«
* âœ… å®˜æ–¹æ’ä»¶ä½“ç³»
* âœ… CDNï¼ˆè‡ªåŠ¨æ£€æµ‹ + å¤šæä¾›å•†ï¼‰
* âœ… æ„å»ºå‹ç¼©ï¼ˆtar / tar.gz / zipï¼‰
* âœ… æ„å»ºåˆ†æ

### Phase 2 Â· å·¥ç¨‹è§„æ¨¡åŒ–ï¼ˆğŸš§ è¿›è¡Œä¸­ï¼‰

* ğŸš§ Monorepo æ·±åº¦æ”¯æŒ
* ğŸš§ æ„å»ºç¼“å­˜ä¸åŠ é€Ÿ
* ğŸš§ æ„å»ºå¯è§‚æµ‹æ€§
* ğŸš§ PWA æ”¯æŒ

### Phase 3 Â· è·¨å¹³å°å·¥ç¨‹ï¼ˆğŸ’­ è§„åˆ’ä¸­ï¼‰

* ğŸ’­ Electron å·¥ç¨‹å¢å¼º
* ğŸ’­ React Native å·¥ç¨‹ååŒ
* ğŸ’­ Web / Desktop / Mobile å·¥ç¨‹ç»Ÿä¸€

---

## ğŸ“¦ ä¾èµ–ç®¡ç†

æœ¬é¡¹ç›®ä½¿ç”¨ pnpm çš„ workspace catalog åŠŸèƒ½æ¥é›†ä¸­ç®¡ç†æ‰€æœ‰ä¾èµ–ç‰ˆæœ¬ã€‚

### æ·»åŠ æ–°ä¾èµ–

1. åœ¨ `pnpm-workspace.yaml` çš„ catalog ä¸­æ·»åŠ ä¾èµ–ç‰ˆæœ¬ï¼š
   ```yaml
   catalog:
     new-dependency: ^1.0.0
   ```

2. åœ¨ package.json ä¸­ä½¿ç”¨ catalog è¯­æ³•å¼•ç”¨ï¼š
   ```json
   {
     "dependencies": {
       "new-dependency": "catalog:"
     }
   }
   ```

### æ›´æ–°ä¾èµ–ç‰ˆæœ¬

1. åœ¨ `pnpm-workspace.yaml` catalog ä¸­æ›´æ–°ç‰ˆæœ¬
2. è¿è¡Œ `pnpm install` æ›´æ–°æ‰€æœ‰åŒ…
3. è¿è¡Œ `pnpm version:check` éªŒè¯ä¸€è‡´æ€§

### éªŒè¯

è¿è¡Œ `pnpm version:check` æ¥éªŒè¯ï¼š
- æ‰€æœ‰å¤–éƒ¨ä¾èµ–ä½¿ç”¨ catalog å¼•ç”¨
- æ‰€æœ‰ catalog æ¡ç›®å­˜åœ¨
- å·¥ä½œåŒºä¾èµ–ä½¿ç”¨æ­£ç¡®è¯­æ³•

### æ„å»ºäº§ç‰©ç®¡ç†

é¡¹ç›®å·²é…ç½® `.gitignore` ç¡®ä¿æ‰€æœ‰åŒ…çš„ `dist/` ç›®å½•ä¸ä¼šè¢«æäº¤åˆ° gitï¼š
- æ„å»ºäº§ç‰©ä»…å­˜åœ¨äºæœ¬åœ°
- æ¯æ¬¡æ„å»ºéƒ½ä¼šé‡æ–°ç”Ÿæˆ
- ä¿æŒä»“åº“æ¸…æ´ï¼Œé¿å…ä¸å¿…è¦çš„æ–‡ä»¶å†²çª

è¯¦ç»†ä¿¡æ¯è¯·å‚è€ƒ [ä¾èµ–ç®¡ç†æŒ‡å—](./DEPENDENCY_MANAGEMENT.md)ã€‚

---

## ğŸ“¦ æœªæ¥è§„åˆ’

* Monorepo æ”¯æŒ
* React Native / Electron é€‚é…
* æ„å»ºç¼“å­˜ä¸åŠ é€Ÿ

---

## ğŸ”— ç›¸å…³é“¾æ¥

- [GitHub ä»“åº“](https://github.com/jackBoVip/vite-enhance)
- [npm åŒ…](https://www.npmjs.com/package/vite-enhance)
- [å‘å¸ƒæŒ‡å—](PUBLISHING.md) - äº†è§£å¦‚ä½•å‘å¸ƒæ–°ç‰ˆæœ¬
- [æ›´æ–°æ—¥å¿—](CHANGELOG.md) - æŸ¥çœ‹ç‰ˆæœ¬æ›´æ–°è®°å½•

## ğŸ¤ è´¡çŒ®

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼è¯·æŸ¥çœ‹ [è´¡çŒ®æŒ‡å—](CONTRIBUTING.md) äº†è§£è¯¦æƒ…ã€‚

### å¼€å‘æµç¨‹

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯: `git checkout -b feature/amazing-feature`
3. æäº¤æ›´æ”¹: `git commit -m 'Add amazing feature'`
4. æ¨é€åˆ†æ”¯: `git push origin feature/amazing-feature`
5. æäº¤ Pull Request

### æœ¬åœ°å¼€å‘

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/jackBoVip/vite-enhance.git
cd vite-enhance

# å®‰è£…ä¾èµ–
pnpm install

# æ„å»ºæ‰€æœ‰åŒ…
pnpm build

# å¼€å‘æ¨¡å¼ (ç›‘å¬æ–‡ä»¶å˜åŒ–)
pnpm dev

# ç±»å‹æ£€æŸ¥
pnpm typecheck

# ç‰ˆæœ¬æ£€æŸ¥
pnpm version:check

# åŒæ­¥ä¾èµ–ç‰ˆæœ¬
pnpm version:sync
```

---

## â“ å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆæ„å»ºå CDN èµ„æºåŠ è½½å¤±è´¥ï¼Ÿ

**A**: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. ç½‘ç»œæ˜¯å¦èƒ½è®¿é—® `cdn.jsdelivr.net`
2. å¦‚æœæ˜¯å†…ç½‘ç¯å¢ƒï¼Œé…ç½® `customProdUrl` æŒ‡å‘å†…ç½‘ CDN
3. å¦‚æœä¸éœ€è¦ CDNï¼Œè®¾ç½® `cdn: false`

### Q2: Vue é¡¹ç›®ä½¿ç”¨äº†å“ªä¸ªç‰ˆæœ¬çš„ Vueï¼Ÿ

**A**: è‡ªåŠ¨ä½¿ç”¨ `vue.runtime.global.prod.js`ï¼ˆruntime ç‰ˆæœ¬ï¼‰ï¼Œå› ä¸ºï¼š
* SFC é¡¹ç›®åœ¨æ„å»ºæ—¶å·²ç»ç¼–è¯‘äº†æ¨¡æ¿
* Runtime ç‰ˆæœ¬ä¸åŒ…å«æ¨¡æ¿ç¼–è¯‘å™¨ï¼Œä½“ç§¯æ›´å°ï¼ˆçº¦ 30%ï¼‰

### Q3: æ€ä¹ˆç¦ç”¨æŸäº›åŠŸèƒ½ï¼Ÿ

**A**: ç›´æ¥è®¾ç½®ä¸º `false`ï¼š
```ts
enhance: {
  cdn: false,      // ç¦ç”¨ CDN
  compress: false, // ç¦ç”¨å‹ç¼©
  analyze: false,  // ç¦ç”¨åˆ†æ
}
```

### Q4: æ”¯æŒå“ªäº› CDN æä¾›å•†ï¼Ÿ

**A**: æ”¯æŒï¼š
* `jsdelivr` - é»˜è®¤ï¼Œå…¨çƒ CDN
* `unpkg` - npm å®˜æ–¹ CDN
* `cdnjs` - Cloudflare CDN
* `custom` - è‡ªå®šä¹‰ CDN åœ°å€

### Q5: æ€ä¹ˆåœ¨ Monorepo ä¸­ä½¿ç”¨ï¼Ÿ

**A**: åœ¨æ¯ä¸ªå­åŒ…çš„ `vite.config.ts` ä¸­ç‹¬ç«‹é…ç½®ï¼š
```ts
// packages/app1/vite.config.ts
import { defineEnhanceConfig } from 'vite-enhance'

export default defineEnhanceConfig({
  enhance: {
    // è‡ªåŠ¨æ£€æµ‹é¡¹ç›®ç±»å‹å’Œæ¡†æ¶
  }
})
```

### Q6: crossorigin="anonymous" æ˜¯å¦ä¼šå¯¼è‡´é—®é¢˜ï¼Ÿ

**A**: ä¸ä¼šã€‚ä¸»æµ CDNï¼ˆjsdelivrã€unpkgï¼‰éƒ½æ”¯æŒ CORSã€‚å¦‚æœè‡ªå»º CDN ä¸æ”¯æŒ CORSï¼Œå¯ä»¥è‡ªå®šä¹‰ï¼š
```ts
cdn: {
  generateScriptTag: () => ({}), // ä¸æ·»åŠ  crossorigin
}
```

---

## ğŸ“„ License

MIT

---

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

Vite Enhance Kit é‡‡ç”¨ Monorepo æ¶æ„ï¼ŒåŒ…å«å¤šä¸ªåŠŸèƒ½åŒ…ï¼š

### åŒ…ç»“æ„

* **`packages/config`** - é…ç½®å¤„ç†æ ¸å¿ƒé€»è¾‘
  * `defineEnhanceConfig` - ä¸»é…ç½®å‡½æ•°
  * é…ç½®éªŒè¯ä¸é»˜è®¤å€¼å¤„ç†
  * Vite é…ç½®è½¬æ¢

* **`packages/shared`** - å…±äº«ç±»å‹ä¸å·¥å…·
  * ç±»å‹å®šä¹‰ï¼ˆé…ç½®ã€æ’ä»¶ç­‰ï¼‰
  * å·¥å…·å‡½æ•°
  * æ—¥å¿—å·¥å…·

* **`packages/vite-enhance`** - ä¸»å…¥å£åŒ…
  * é‡æ–°å¯¼å‡º config åŒ…çš„åŠŸèƒ½
  * ç”¨æˆ·å…¥å£ç‚¹

* **`packages/plugins/*`** - å®˜æ–¹æ’ä»¶
  * `analyze` - æ„å»ºåˆ†ææ’ä»¶
  * `cache` - æ„å»ºç¼“å­˜æ’ä»¶
  * `cdn` - CDN å¤–éƒ¨åŒ–æ’ä»¶
  * `framework-*` - æ¡†æ¶æ”¯æŒæ’ä»¶ï¼ˆVue / React / Svelte / Solid / Lit / Preactï¼‰
  * `pwa` - PWA æ”¯æŒæ’ä»¶

### æ’ä»¶æ¶æ„

æ¯ä¸ªæ’ä»¶éƒ½å®ç° `EnhancePlugin` æ¥å£ï¼ŒåŒ…å«ï¼š

* `name` - æ’ä»¶åç§°
* `version` - æ’ä»¶ç‰ˆæœ¬
* `apply` - åº”ç”¨ç¯å¢ƒï¼ˆserve/build/bothï¼‰
* `vitePlugin()` - è¿”å› Vite æ’ä»¶
* ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°
